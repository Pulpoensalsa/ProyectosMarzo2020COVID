<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        const posts = [{
                title: "Post1",
                body: "This is post one"
            },
            {
                title: "Post2",
                body: "This is post two"
            }
        ];

        function getPosts( ) {
            return new Promise ( (resolve, reject) => {    
                setTimeout(() => {
                    let output = ``;
                    posts.forEach((post, index) => {
                        output += `<li>${post.title}</li>`;
                    })
                    document.body.innerHTML = output;
                    resolve( "Ya hemos terminado todo todo todo" );   
                }, 1000);
            });
        }

        function createPost(newPost) {
            return new Promise ( (resolve, reject) => {  
                  
                setTimeout(() => {
                    posts.push(newPost);
                    reject("Error interno en createPost");
                      
                    // throw new Error("");
                }, 2000);

            });
        }

        async function crearPublicarNuevoPost(){
            try{
                await createPost({ title: "Post3", body: "This is post three" });
                let argumentoResolve = await getPosts();
                console.log(argumentoResolve);
                return argumentoResolve;   //resolve()
            }
            catch(error){
                throw new Error(jurrr);   //reject
            }
        }

        crearPublicarNuevoPost()
            .then( (argumento) => console.log(argumento))
            .catch( (argumento) => console.log(argumento))
        

        //Anidar promesas:
        // createPost({ title: "Post3", body: "This is post three" })
        //     .then ( getPosts )                        // .then(getPost)
        //     .then ( (mensaje)=> { console.log(mensaje) })
        //     .catch( () => { console.log ("Error en el getPost")}  );

    
    </script>
</body>

</html>